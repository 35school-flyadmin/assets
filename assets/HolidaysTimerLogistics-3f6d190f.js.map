{"version":3,"file":"HolidaysTimerLogistics-3f6d190f.js","sources":["../../src/any/versions.jsx","../../src/components/HolidaysTimer.jsx","../../src/hooks/GetHolidaysCurrent.jsx","../../src/components/HolidaysTimerLogistics.jsx"],"sourcesContent":["import versions from \"../versions.json\";\r\nfunction getLastVersion(){\r\n    return versions.at(-1);\r\n}\r\nconsole.log(getLastVersion());\r\nexport {getLastVersion};","import {useEffect, useState} from \"react\";\r\nimport useHolidaysCurrent from \"../hooks/GetHolidaysCurrent.jsx\";\r\nimport styled from \"styled-components\";\r\n\r\nfunction HolidaysTimer({targetDate, title, status}) {\r\n    const timeLeft = useHolidaysCurrent(targetDate);\r\n\r\n    if (Object.values(timeLeft).filter(item => item !== 0).length === 0) return null;\r\n    return (\r\n        <TimerContainer>\r\n            <div className=\"title\">{title} <span>{status ? 'закончатся через: ' : 'наступят через'}</span></div>\r\n            <div className=\"timer\">\r\n                <div className=\"item\">\r\n                    <div className=\"number\">{timeLeft.days}</div>\r\n                    <div className=\"names\">дней</div>\r\n                </div>\r\n                <div className=\"item\">\r\n                    <div className=\"number\">{timeLeft.hours}</div>\r\n                    <div className=\"names\">часов</div>\r\n                </div>\r\n                <div className=\"item\">\r\n                    <div className=\"number\">{timeLeft.minutes}</div>\r\n                    <div className=\"names\">минут</div>\r\n                </div>\r\n                <div className=\"item\">\r\n                    <div className=\"number\">{timeLeft.seconds}</div>\r\n                    <div className=\"names\">секунд</div>\r\n                </div>\r\n            </div>\r\n        </TimerContainer>\r\n    )\r\n}\r\n\r\nexport default HolidaysTimer;\r\n\r\nconst TimerContainer = styled.div`\r\n    display: flex;\r\n    position: relative;\r\n    width: 100%;\r\n    color: #FFFFFF;\r\n    flex-direction: row;\r\n    justify-content: center;\r\n    gap: 10px;\r\n    align-items: center;\r\n    padding: 1em 0;\r\n    background: linear-gradient(90.5deg, #219653 3%, #6BBF59 100.2%);\r\n\r\n    @media screen and (max-width: 800px) {\r\n        flex-direction: column;\r\n\r\n    }\r\n\r\n    & > div.title {\r\n        font-weight: 500;\r\n        font-size: 24px;\r\n        text-align: center;\r\n    }\r\n\r\n    & > div.timer {\r\n        display: flex;\r\n        flex-direction: row;\r\n        gap: 5px;\r\n        font-size: 18px;\r\n        @media screen and (max-width: 250px) {\r\n            flex-wrap: wrap;\r\n        }\r\n\r\n        & > div.item {\r\n            display: flex;\r\n            position: relative;\r\n            flex-direction: column;\r\n            background-color: #219653;\r\n            border-radius: 6px;\r\n            color: #FFFFFF;\r\n            justify-content: center;\r\n            align-items: center;\r\n            height: 60px;\r\n            width: 60px;\r\n            \r\n\r\n            & > div.names {\r\n                font-size: 13px;\r\n            }\r\n        }\r\n    }\r\n`;","import {useCallback, useEffect, useState} from \"react\";\r\n\r\nexport default function useHolidaysCurrent(targetDate){\r\n    const timeLeftHand = useCallback(() => {\r\n        const difference = targetDate - new Date();\r\n        let timeLeft = {};\r\n\r\n        if (difference > 0) {\r\n            timeLeft = {\r\n                days: Math.floor(difference / (1000 * 60 * 60 * 24)),\r\n                hours: Math.floor((difference / (1000 * 60 * 60)) % 24),\r\n                minutes: Math.floor((difference / 1000 / 60) % 60),\r\n                seconds: Math.floor((difference / 1000) % 60)\r\n            };\r\n        } else {\r\n            timeLeft = {days: 0, hours: 0, minutes: 0, seconds: 0};\r\n        }\r\n\r\n        return timeLeft;\r\n    }, [targetDate]);\r\n    const [time, setTime] = useState(timeLeftHand());\r\n\r\n    useEffect(() => {\r\n        const timer = setTimeout(() => {\r\n            setTime(timeLeftHand());\r\n        }, 1000);\r\n\r\n        return () => clearTimeout(timer);\r\n    });\r\n    return time;\r\n}","import {useEffect, useState} from \"react\";\r\nimport {getLastVersion} from \"../any/versions.jsx\";\r\nimport HolidaysTimer from \"./HolidaysTimer.jsx\";\r\n\r\nexport default function HolidaysTimerLogistics() {\r\n    const [holidays, setHolidays] = useState([]);\r\n    const [holidaysDates, setHolidaysDates] = useState([]);\r\n    const [status, setStatus] = useState(null);\r\n\r\n    useEffect(() => {\r\n        async function getData() {\r\n            try {\r\n                const request = await fetch(`/data/holidays-data.json?v=${getLastVersion()}`);\r\n                const response = await request.json();\r\n                setHolidays(response.map(item => item.title));\r\n                setHolidaysDates(response.map(item => item?.dates.map(date => new Date(date))));\r\n            } catch (error) {\r\n                console.log('error')\r\n            } finally {\r\n                //\r\n            }\r\n        }\r\n\r\n        getData();\r\n\r\n    }, [])\r\n\r\n\r\n    useEffect(() => {\r\n        if (holidaysDates.length !== 0) showCountdown();\r\n    }, [holidaysDates]);\r\n\r\n\r\n\r\n    function getCurrentVacation(currentDate) {\r\n        const vacations = holidaysDates;\r\n        for (let i = 0; i < vacations.length; i++) {\r\n            if (currentDate >= vacations[i].at(0) && currentDate <= vacations[i].at(-1)) {\r\n                return i + 1; // Нумерация каникул с 1\r\n            }\r\n        }\r\n        return 0;\r\n    }\r\n\r\n    function getNextVacation(currentDate) {\r\n        const vacations = holidaysDates;\r\n        for (let i = 0; i < vacations.length; i++) {\r\n            if (currentDate < vacations[i].at(0)) {\r\n                return i + 1; // Нумерация каникул с 1\r\n            }\r\n        }\r\n        return 0;\r\n    }\r\n\r\n    function showCountdown() {\r\n        const currentDate = new Date();\r\n        const currentVacation = getCurrentVacation(currentDate);\r\n\r\n        if (currentVacation > 0) {\r\n            setStatus({status: true, index: currentVacation - 1});\r\n        } else {\r\n            const nextVacation = getNextVacation(currentDate);\r\n            if (nextVacation > 0) {\r\n                setStatus({status: false, index: nextVacation - 1});\r\n            } else {\r\n                setStatus(null);\r\n            }\r\n        }\r\n    }\r\n\r\n\r\n    if (status === null) return null;\r\n    return <HolidaysTimer targetDate={status.status ? holidaysDates[status.index].at(-1) : holidaysDates[status.index].at(0)} title={holidays[status.index]} status={status.status}/>;\r\n}"],"names":["getLastVersion","versions","at","HolidaysTimer","targetDate","title","status","timeLeft","timeLeftHand","useCallback","difference","Date","days","Math","floor","hours","minutes","seconds","time","setTime","useState","useEffect","timer","setTimeout","clearTimeout","useHolidaysCurrent","Object","values","filter","item","length","TimerContainer","children","jsxs","className","jsx","console","log","styled","div","HolidaysTimerLogistics","holidays","setHolidays","holidaysDates","setHolidaysDates","setStatus","async","request","fetch","response","json","map","dates","date","error","currentDate","currentVacation","vacations","i","getCurrentVacation","index","nextVacation","getNextVacation"],"mappings":"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"}